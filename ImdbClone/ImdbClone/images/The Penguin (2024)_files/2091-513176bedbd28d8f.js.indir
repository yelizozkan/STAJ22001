"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2091],{73818:function(e,t,i){i.d(t,{Z:function(){return k}});var a,r,o=i(52322),n=i(2784),s=i(4283),l=i(85767),d=i(83128),c=i(51250);let m="ad-oo",u={getConsentFromCookie(e,t){let i=(0,c.rZ)(m,t?.headers);if(void 0!==i)return!(parseInt(i)&e)},setConsentToCookie(e,t,i){let a=(0,c.rZ)(m,i),r=0;if(void 0!==a&&(("number"==typeof a||"string"==typeof a)&&(r=parseInt(a)),r&t&&!e||!(r&t)&&e))return;e||(r|=t);let o=new Date;o.setHours(o.getHours()+36),(0,c.Ys)(m,r.toString(),o,"shared")}};var g=i(54073),p=i.n(g),f=i(45455),h=i.n(f),I=i(15907),E=i(12859),T=i(76460);let w=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)};var b=i(16189);let A=(0,b.createLogger)()("util_sisSlotMarkup"),y=e=>{let t=e?.slots;return t&&t[E.A.SIS_PIXEL]?.slotMarkup},v=e=>{let t=e.match(/el\.src="(.*)\";/),i=t?t[1]:void 0;return i||A.error("Failed to retrieve SIS Pixel URL"),i},x=async e=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){A.error("Error fetching SIS Pixel",e)}},S=(0,b.createLogger)()("util_sisPixel_rws");(a=r||(r={})).GRANTED="granted",a.PROMPT="prompt",a.DENIED="denied";let _=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),M=["mousedown","scroll","keydown"],L="https://amazon-adsystem.com",N=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return S.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return S.log(`Received cookieDeprecationLabel: ${e}`),_.has(e)}catch(e){return S.error("Issue fetching cookieDeprecationLabel",e),!1}},R=async()=>{let e=await $();switch(S.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return P();case"prompt":return C()}S.log(`'top-level-storage-access' permissions for ${L}: denied`)},C=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),i=async()=>{navigator.userActivation.isActive&&(M.forEach(e=>{document.removeEventListener(e,i)}),await P(),e(!0))};return M.forEach(e=>{document.addEventListener(e,i)}),t},$=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:L})).state}catch(e){S.error("Error querying Storage Access permissions",e);return}},P=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(L),!0}catch(e){S.error("Error requesting storage access",e)}},D=n.memo(e=>{let{sisSlotMarkup:t}=e,[i,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{if(!await N())return a(!0);await R();let e=v(t);e&&await x(e)})()},[]),i?(0,o.jsx)("div",{ref:I.dangerouslySetHTML.bind(null,t)}):null}),O=e=>{let{adSlotsInfo:t}=e;(0,T.WJ)();let i=()=>{(0,I.isFullscreen)()||(0,I.makeAdAJAXRequest)(t).finally(()=>I.responsiveAdAPIWrapper.setPreviousWindowWidth())},{slotsEnabled:a,clientSideUrlBase:r,atfSlots:s,slotSizeMap:l,apsSlotInfoMap:d}=(0,T.OF)(t);n.useEffect(()=>{let e,o;if(a&&!h()(l)&&(I.responsiveAdAPIWrapper.setPreviousWindowWidth(),e=p()(i,750),window.addEventListener("resize",e),t?.adRefreshInfo?.isEnabled&&("complete"===document.readyState?(0,I.handleAutoRefresh)(t):window.addEventListener("load",()=>(0,I.handleAutoRefresh)(t)))),!a||!r||!s.includes(E.A.INLINE20)){let e={type:I.AdVideoEventType.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:E.A.INLINE20,timestamp:Date.now()},t={type:I.AdVideoEventType.EMPTY,slotName:"",timestamp:Date.now()};w(I.MediaEvent.MEDIA_PLAYBACK_EVENT_NAME,e),w(I.MediaEvent.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e),o&&window.removeEventListener("load",o)}},[]);let c=(0,T.Bf)(a,r,s,l,d),m=y(t);return(0,o.jsxs)(o.Fragment,{children:[m?(0,o.jsx)(D,{sisSlotMarkup:m}):null,(0,o.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:c}})]})};function k(){let e=(0,l.B)(),{adSlotsInfo:t}=(0,d.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&u.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,o.jsx)(s.Z,{name:"IMDbNextAdPageData",children:(0,o.jsx)(O,{adSlotsInfo:t})})}},12859:function(e,t,i){i.d(t,{A:function(){return a}});let a={INLINE20:"inline20",INLINE40_MAIN:"inline40-responsive-main",INLINE40_SIDEBAR:"inline40-responsive-sidebar",INLINE40:"inline40",INLINE50:"inline50",INLINE60:"inline60",INLINE80:"inline80",INLINEBOTTOM:"inlinebottom",INTERSTITIAL:"interstitial",MEDIAVIEWER_BANNER:"mediaviewer_banner",PROMOTED_WATCH_BAR:"promoted_watch_bar",PROVIDER_PROMOTION:"provider_promotion",SIS_PIXEL:"sis_pixel",VIDEO_CAROUSEL_ADSCANNER:"video_carousel_adscanner"}},76460:function(e,t,i){var a,r,o,n,s,l;i.d(t,{WJ:function(){return d},Bf:function(){return c},OF:function(){return m},Wd:function(){return u}}),(n=a||(a={})).PREMIUM="premium",n.STANDARD="standard",(s=r||(r={})).BLANK="blank",s.UNKNOWN="unknown",(l=o||(o={})).BLANK="blk",l.UNKNOWN="unk";let d=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},c=(e,t,i,a,r)=>`
        if (window && window.ad_utils && window.ad_utils.makeAtfSlotsCall) {
            window.ad_utils.makeAtfSlotsCall(
                ${e},
                '${t}',
                '${i}',
                ${JSON.stringify(a)},
                ${r?JSON.stringify(r):"{}"});
    }`,m=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",atfSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),u=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===r.BLANK},72091:function(e,t,i){let a,r;i.r(t),i.d(t,{__N_SSP:function(){return tj},default:function(){return tB}});var o,n,s,l,d=i(52322),c=i(66898),m=i(11778),u=i(70314),g=i.n(u),p=i(2784),f=i(15907),h=i(25436),I=i(83128),E=i(16189);let T=(0,E.createLogger)()("util_fetchAdServiceAd"),w=async e=>{try{return await (0,f.makeAdServiceAdAJAXRequest)(e)}catch(e){return T.error("makeAdServiceAdAJAXRequest failed",e),null}};var b=i(33192),A=i(14865),y=i(45103),v=i(56812),x=i(30382),S=i.n(x),_=i(79855),M=i(48574),L=i(66662),N=i(11836),R=i(19596),C=i(91842);let $=`
    position: absolute;
    left: 50%;
    user-select: none;
    max-height: 100%;
    max-width: 100%;

    /* hide left/right image affordance when not on a touch device */
    ${C.mediaQueries.devices.onCursorScreens} {
        &.peek { display: none; }
    }
`,P=`
    height: 100%;
    width: 100%;
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    left: 50%;
`,D=`
    top: 40%;
    transform: translate(-50%, -40%);
`,O=`
    top: 20%;
    transform: translate(-50%, -20%);
`,k=R.default.img.withConfig({componentId:"sc-7c0a9e7c-0"})([""," ",""],$,D),j=R.default.img.withConfig({componentId:"sc-7c0a9e7c-1"})([""," ",""],$,O),B=R.default.div.withConfig({componentId:"sc-7c0a9e7c-2"})([""," ",""],P,D),H=R.default.div.withConfig({componentId:"sc-7c0a9e7c-3"})([""," ",""],P,O),V=S()`
    fragment MediaViewerImageMeta on Image {
        id
        url
        height
        width
        caption {
            plainText
        }
    }
`;function G(e,t){return e>t?{ImageElement:k,ContainerElement:B}:{ImageElement:j,ContainerElement:H}}let U=e=>{let{image:t,offset:i,prevImage:a,nextImage:r}=e,o=(0,_.Z)(),n=(0,M.wL)("MediaViewer_Image");if(!t||!t.url||!t.height||!t.width)return n.error("mediaviewer image missing required metadata",{id:t.id}),(0,d.jsx)(H,{className:"image-metadata-failure",children:(0,d.jsx)(N.F,{})});let s=G(t.height,t.width),l=s.ImageElement,c=s.ContainerElement,m=G(a?.height??0,a?.width??0),u=m.ImageElement,g=m.ContainerElement,p=G(r?.height??0,r?.width??0),f=p.ImageElement,h=p.ContainerElement,I=o.formatMessage({id:"mediaViewerImage_alt_missingCaption",defaultMessage:"Photo is missing caption."}),E=i||0;return(0,d.jsxs)(d.Fragment,{children:[a&&a.url&&(0,d.jsx)(g,{style:{maxHeight:`${a&&a.height||t.height}px`,maxWidth:`${a&&a.width||t.width}px`,left:`calc(-60% + ${E}px)`},children:(0,d.jsx)(u,{className:"peek",src:a.url,sizes:"100vw",srcSet:(0,L.gA)(a,!0),"data-image-id":`${a.id}-prev`,alt:a.caption?.plainText||I})}),(0,d.jsx)(c,{style:{maxHeight:`${t.height}px`,maxWidth:`${t.width}px`,left:`calc(50% + ${E}px)`},children:(0,d.jsx)(l,{src:t.url,sizes:"100vw",srcSet:(0,L.gA)(t,!0),"data-image-id":`${t.id}-curr`,alt:t.caption?.plainText||I})}),r&&r.url&&(0,d.jsx)(h,{style:{maxHeight:`${r&&r.height||t.height}px`,maxWidth:`${r&&r.width||t.width}px`,left:`calc(160% + ${E}px)`},children:(0,d.jsx)(f,{className:"peek",src:r.url,sizes:"100vw",srcSet:(0,L.gA)(r,!0),"data-image-id":`${r.id}-prev`,alt:r.caption?.plainText||I})})]})};U.fragments={image:V};var W=i(67646),F=i(81988),Y=i(72779),q=i.n(Y),Q=i(51218),K=i(28827),z=i(11817);function Z(e){let{attributionUrl:t,text:i}=e,a=i||t;return t&&a?`<a href="${t}" target="_blank" rel="noopener nofollow">${a}</a>`:a?`${a}`:void 0}var X=i(14088),J=i(26806),ee=i(96446),et=i(69635);let ei=(0,R.default)(y.IconButton).withConfig({componentId:"sc-860b674-0"})(["","{margin-right:calc(var(--ipt-pageMargin) - 0.75rem);}"],C.mediaQueries.breakpoints.above.l);var ea=e=>{let{name:t,label:i,className:a,isButton:r,onSelect:o,href:n}=e,s={name:t,label:i,className:a,onSelect:o,"data-testid":`mv-contrib-${t}`};return(0,d.jsx)(ei,{...s,href:r?void 0:n})},er=e=>{let t=(0,J.m8)(),i=(0,ee.nu)(),a=(0,y.useBreakpointsAsConfig)();if(!e.flow)return null;let r=`${e.flow.desktopLink}&ref_=${e.refTagPrefix}_edt`,o=a.l||a.xl;return(0,d.jsx)(ea,{name:e.actionName,label:e.label,className:q()(e.className),onSelect:a=>{o?i?e.flow.desktopOnOpen():(0,et.r)("mv_signin"):(a.preventDefault(),t.query(S()`
                        query ContributeActionButton(
                            $imageId: ID!
                            $relatedId: ID!
                            $returnUrl: URL!
                        ) {
                            image(id: $imageId) {
                                correctionLink(
                                    relatedId: $relatedId
                                    contributionContext: {
                                        isInIframe: false
                                        returnUrl: $returnUrl
                                        business: "consumer"
                                    }
                                ) {
                                    url
                                }
                                reportingLink(
                                    relatedId: $relatedId
                                    contributionContext: {
                                        isInIframe: false
                                        returnUrl: $returnUrl
                                        business: "consumer"
                                    }
                                ) {
                                    url
                                }
                            }
                        }
                    `,{...e.query,returnUrl:window.location.href}).toPromise().then(t=>{let i=e.flow.resolveMobileURL(t.data.image);window.open(i,"_self")}).catch(e=>{throw e}))},href:r,isButton:o})};let eo=R.default.div.withConfig({componentId:"sc-9422afe0-0"})(["position:absolute;bottom:0;width:100%;max-height:calc(53% - 1.5rem);display:flex;z-index:2;","{max-height:calc(50%);}"],C.mediaQueries.devices.onTouchScreens),en=(0,R.default)(y.PageContentContainer).withConfig({componentId:"sc-9422afe0-1"})(["position:relative;display:flex;width:100%;"]),es=R.default.div.withConfig({componentId:"sc-9422afe0-2"})([""," "," background:rgba(",",0.85);background:rgba(",",0.85);border-top:1px solid ",";border-top:1px solid ",";width:100%;display:flex;flex-direction:column;overflow:auto;transition:all 0.5s ease-out ","{height:100%;overflow:hidden;}"],(0,C.setTypographyType)("body"),(0,C.setPropertyToColorVar)("color","ipt-on-baseAlt-color"),(0,C.getColorVarValue)("ipt-baseAlt-shade3-rgb"),(0,C.getColorVar)("ipt-baseAlt-shade3-rgb"),(0,C.getColorVarValue)("ipt-baseAlt-border-color"),(0,C.getColorVar)("ipt-baseAlt-border-color"),C.mediaQueries.breakpoints.above.l),el=R.default.div.withConfig({componentId:"sc-9422afe0-3"})([""," "," display:flex;justify-content:space-between;padding:0.5rem 1rem;padding:0.5rem ",";flex-shrink:0;"],(0,C.setTypographyType)("bodySmall"),(0,C.setPropertyToColorVar)("color","ipt-on-baseAlt-accent1-color"),(0,C.getSpacingVar)("ipt-pageMargin")),ed=R.default.span.withConfig({componentId:"sc-9422afe0-4"})(["display:none;","{display:flex;}"],C.mediaQueries.breakpoints.only.m),ec=`
    position: relative;
    &::after {
        content: '';
        background: linear-gradient(
            to top,
            ${(0,C.getColorVarValue)("ipt-baseAlt-shade3-color")},
            transparent
        );
        background: linear-gradient(
            to top,
            ${(0,C.getColorVar)("ipt-baseAlt-shade3-color")},
            transparent
        );
        height: 1rem;
        width: 100%;
        position: absolute;
        bottom: 0;
        left: 0;
    }
`,em=R.default.div.withConfig({componentId:"sc-9422afe0-5"})(["display:flex;flex-direction:column;","{height:100%;}"],C.mediaQueries.breakpoints.above.l),eu=R.default.div.withConfig({componentId:"sc-9422afe0-6"})(["display:flex;flex-direction:column;overflow:auto;flex-grow:2;","{flex-direction:row;overflow:hidden;","}"],C.mediaQueries.breakpoints.above.l,ec),eg=R.default.div.withConfig({componentId:"sc-9422afe0-7"})(["width:100%;text-align:center;padding:0 1rem 0.5rem 1rem;padding:0 "," 0.5rem ",";","{","}"],(0,C.getSpacingVar)("ipt-pageMargin"),(0,C.getSpacingVar)("ipt-pageMargin"),C.mediaQueries.breakpoints.above.l,(0,C.setPropertyToColorVar)("background","ipt-baseAlt-shade3-bg")),ep=(0,R.default)(y.HTMLContent).withConfig({componentId:"sc-9422afe0-8"})(["padding:0 1rem 1rem;padding:0 "," 1rem;","{overflow:auto;flex-grow:1;width:60%;padding-right:1rem;height:100%;}"],(0,C.getSpacingVar)("ipt-pageMargin"),C.mediaQueries.breakpoints.above.l),ef=R.default.div.withConfig({componentId:"sc-9422afe0-9"})([""," margin:0 1rem;margin:0 ",";min-height:1px;min-width:1px;","{margin:0 0 1rem 0;}"],(0,C.setPropertyToColorVar)("background","ipt-baseAlt-border-color"),(0,C.getSpacingVar)("ipt-pageMargin"),C.mediaQueries.breakpoints.above.l),eh=R.default.div.withConfig({componentId:"sc-9422afe0-10"})(["margin:0 1rem;margin:0 ",";padding-top:1rem;","{margin:0;padding:0 0.25rem 1rem 1rem;width:35%;overflow:auto;height:100%;}"],(0,C.getSpacingVar)("ipt-pageMargin"),C.mediaQueries.breakpoints.above.l),eI=R.default.div.withConfig({componentId:"sc-9422afe0-11"})(["display:flex;justify-content:center;padding:0.5rem 0;","{margin-top:-0.5rem;justify-content:flex-start;flex-shrink:1;flex-direction:column;padding-top:0;}"],C.mediaQueries.breakpoints.above.l),eE=`
    display: none;
    position: absolute;
    right: 4.5rem;
    ${C.mediaQueries.breakpoints.above.l} {
        display: block;
    }
`,eT=(0,R.default)(y.IconBorderButton).withConfig({componentId:"sc-9422afe0-12"})([""," top:-1.125rem;z-index:1;transition:opacity 0.5s ease-in;opacity:",";visibility:",";"],eE,e=>e.opacity,e=>e.visibility),ew=(0,R.default)(y.IconBorderButton).withConfig({componentId:"sc-9422afe0-13"})([""," bottom:4rem;transition:opacity 0.5s ease-in;opacity:",";visibility:",";"],eE,e=>e.opacity,e=>e.visibility),eb=R.default.div.withConfig({componentId:"sc-9422afe0-14"})(["margin-bottom:0.25rem;",""],(0,C.setTypographyType)("bodySmall")),eA=R.default.span.withConfig({componentId:"sc-9422afe0-15"})(["margin-right:0.5rem;font-weight:500;"]),ey=(0,R.default)(y.HTMLContent).withConfig({componentId:"sc-9422afe0-16"})([""," ",""],(0,C.setPropertyToColorVar)("color","ipt-on-baseAlt-textSecondary-color"),(0,C.setTypographyType)("copyright")),ev=R.default.img.withConfig({componentId:"sc-9422afe0-17"})(["max-width:100%;"]),ex=e=>{let t=[],i=e.refTagPrefix?`?ref_=${e.refTagPrefix}`:"";for(let a=0;a<e.array.length;a++){let r=e.array[a];r.nameText?.text&&r.id?t.push((0,d.jsx)(y.TextLink,{href:`/name/${r.id}/${i}`,text:r.nameText.text},`image-name-link-${r.id}`)):r.titleText?.text&&r.id?t.push((0,d.jsx)(y.TextLink,{href:`/title/${r.id}/${i}`,text:r.titleText.text},`image-title-link-${r.id}`)):r.text&&t.push((0,d.jsx)("span",{children:r.text},`item-meta-${r.text}`)),a<e.array.length-1&&t.push(", ")}return(0,d.jsx)(d.Fragment,{children:t.length>0&&(0,d.jsxs)(eb,{children:[(0,d.jsx)(eA,{children:e.title}),(0,d.jsx)("span",{children:t})]})})},eS=(e,t)=>{(0,Q.isEnterOrSpaceKey)(e)&&t()},e_=e=>{let t={closeSheetAriaLabel:(0,K.N)(X.KL.closeSheetAriaLabel),openSheetAriaLabel:(0,K.N)(X.KL.openSheetAriaLabel),editAriaLabel:(0,K.N)(X.KL.editAriaLabel),reportAriaLabel:(0,K.N)(X.KL.reportAriaLabel),nameLabel:(0,K.N)(X.KL.nameLabel),titleLabel:(0,K.N)(X.KL.titleLabel),countryLabel:(0,K.N)(X.KL.countryLabel),languageLabel:(0,K.N)(X.KL.languageLabel),photoByAttributionPrefix:(0,K.N)(X.KL.photoByAttributionPrefix),courtesyAttributionPrefix:(0,K.N)(X.KL.courtesyAttributionPrefix)},{content:i,imageData:a,editFlow:r,reportFlow:o,isClosed:n,onCloseClicked:s,onOpenClicked:l}=e,c=n?0:1,m=n?"hidden":"visible",u=function(e,t){let{copyright:i,createdBy:a,source:r}=e;if(!i&&!a&&!r)return;let o=r&&Z(r)?`${t.courtesyText} ${Z(r)}`:void 0,n=[a?`${t.photoByText} ${a}`:void 0,i?`&copy;&nbsp;${i}`:void 0,o].filter(e=>!!e);return n.length?n.join(" - "):void 0}(a,{photoByText:t.photoByAttributionPrefix,courtesyText:t.courtesyAttributionPrefix}),g=()=>{a?.source?.text==="gettyimages.com"?(0,z.P)("offsite-gettyimages"):a?.source?.text==="mptvimages.com"&&(0,z.P)("offsite-mptvimages")};return(0,d.jsx)(eo,{className:q()(e.className),children:(0,d.jsx)(y.SetPalette,{palette:"dark",children:(0,d.jsxs)(en,{children:[(0,d.jsx)(ew,{name:"info",className:X.$C.OPEN,label:t.openSheetAriaLabel,onSelect:l,opacity:n?1:0,visibility:n?"visible":"hidden"}),(0,d.jsx)(eT,{label:t.closeSheetAriaLabel,className:X.$C.CLOSE,name:"clear",onSelect:s,opacity:c,visibility:m}),(0,d.jsx)(es,{"aria-hidden":n,style:{opacity:c,visibility:m},"data-testid":X.z7.PARENT,children:(0,d.jsxs)(em,{children:[(0,d.jsxs)(el,{role:"presentation",children:[(0,d.jsx)("span",{children:i.contextTitle}),(0,d.jsx)(ed,{"data-testid":X.z7.COUNT_DISPLAY,children:i.contextCount})]}),(0,d.jsxs)(eu,{children:[(0,d.jsx)(ep,{html:a.caption?.plaidHtml||""}),(0,d.jsx)(ef,{}),(0,d.jsxs)(eh,{children:[a.names&&(0,d.jsx)(ex,{array:a.names,title:t.nameLabel,refTagPrefix:e.refTagPrefix}),a.titles&&(0,d.jsx)(ex,{array:a.titles,title:t.titleLabel,refTagPrefix:e.refTagPrefix}),a.countries&&(0,d.jsx)(ex,{array:a.countries,title:t.countryLabel,refTagPrefix:e.refTagPrefix}),a.languages&&(0,d.jsx)(ex,{array:a.languages,title:t.languageLabel,refTagPrefix:e.refTagPrefix}),u&&(0,d.jsx)("div",{onClick:g,onKeyDown:e=>{eS(e,g)},"data-testid":"copyright",children:(0,d.jsx)(ey,{html:u})})]}),(0,d.jsxs)(eI,{children:[(0,d.jsx)(er,{flow:r,actionName:"edit",label:t.editAriaLabel,className:X.$C.EDIT,refTagPrefix:e.refTagPrefix,query:{imageId:e.imageData.id,relatedId:e.listId}}),(0,d.jsx)(er,{flow:o,label:t.reportAriaLabel,className:X.$C.REPORT,actionName:"flag",refTagPrefix:e.refTagPrefix,query:{imageId:e.imageData.id,relatedId:e.listId}})]})]}),a.source?.banner&&(0,d.jsx)(eg,{"data-testid":X.z7.ATTR_BANNER,children:(0,d.jsx)("a",{href:a.source.banner.attributionUrl,rel:"nofollow noopener noreferrer",target:"_blank",children:(0,d.jsx)(ev,{src:a.source.banner.url,height:a.source.banner.height,width:a.source.banner.width})})})]})})]})})})};e_.fragments={image:X._P,listItem:X.yS};var eM=i(73818),eL=i(82331),eN=i(11793),eR=i(52817),eC=i(73282);let e$=e=>{let{galleryUrl:t}=e,i=(0,K.N)({id:"mediaViewer_ariaLabel_gallery",defaultMessage:"gallery"});return(0,d.jsx)(y.IconButton,{"data-testid":"mv-gallery-button",name:"grid-view",label:i,href:t,onColor:"base"})};(o=s||(s={})).TITLE="title",o.NAME="name",o.GALLERY="gallery",o.LIST="list";let eP=S()`
    fragment MediaViewerMeta on ImageConnection {
        pageInfo {
            endCursor
            hasNextPage
            hasPreviousPage
            startCursor
        }
        edges {
            position
            cursor
            node {
                ...MediaViewerImageMeta
                ...MediaSheetImageMeta
            }
        }
    }

    ${U.fragments.image}
    ${e_.fragments.image}
`,eD=S()`
    fragment MediaViewerListMeta on ListConnection {
        pageInfo {
            endCursor
            hasNextPage
            hasPreviousPage
            startCursor
        }
        edges {
            position
            cursor
            node {
                item {
                    ...MediaViewerImageMeta
                    ...MediaSheetImageMeta
                }
                ...MediaSheetListItemMeta
            }
        }
    }
    ${U.fragments.image}
    ${e_.fragments.image}
    ${e_.fragments.listItem}
`,eO=S()`
    query NameImages(
        $id: ID!
        $before: ID
        $after: ID
        $jumpTo: ID
        $first: Int
        $last: Int
        $lastYes: Boolean!
        $firstYes: Boolean!
        $queryParams: String
    ) {
        name(id: $id) {
            nameText {
                text
            }
            meta {
                publicationStatus
            }
            images(first: $first, after: $after, jumpTo: $jumpTo)
                @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
            wrapFront: images(last: $last, before: $before)
                @include(if: $lastYes) {
                total
                ...MediaViewerMeta
            }
            wrapBack: images(first: $first) @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
        }
    }
    ${eP}
`,ek=S()`
    query TitleImages(
        $id: ID!
        $before: ID
        $after: ID
        $jumpTo: ID
        $first: Int
        $last: Int
        $lastYes: Boolean!
        $firstYes: Boolean!
        $queryParams: String
    ) {
        title(id: $id) {
            titleText {
                text
            }
            meta {
                publicationStatus
            }
            releaseYear {
                year
            }
            images(first: $first, after: $after, jumpTo: $jumpTo)
                @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
            wrapFront: images(last: $last, before: $before)
                @include(if: $lastYes) {
                total
                ...MediaViewerMeta
            }
            wrapBack: images(first: $first) @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
        }
    }
    ${eP}
`,ej=S()`
    query GalleryImages(
        $id: ID!
        $before: ID
        $after: ID
        $jumpTo: ID
        $first: Int
        $last: Int
        $lastYes: Boolean!
        $firstYes: Boolean!
        $queryParams: String
    ) {
        imageGallery(id: $id) {
            galleryText
            images(first: $first, after: $after, jumpTo: $jumpTo)
                @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
            wrapFront: images(last: $last, before: $before)
                @include(if: $lastYes) {
                total
                ...MediaViewerMeta
            }
            wrapBack: images(first: $first) @include(if: $firstYes) {
                total
                ...MediaViewerMeta
            }
        }
    }
    ${eP}
`,eB=S()`
    query ListImages(
        $id: ID!
        $before: ID
        $after: ID
        $jumpTo: ID
        $first: Int
        $last: Int
        $lastYes: Boolean!
        $firstYes: Boolean!
        $queryParams: String
    ) {
        list(id: $id) {
            name {
                originalText
            }
            items(first: $first, after: $after, jumpTo: $jumpTo)
                @include(if: $firstYes) {
                total
                ...MediaViewerListMeta
            }
            wrapFront: items(last: $last, before: $before)
                @include(if: $lastYes) {
                total
                ...MediaViewerListMeta
            }
            wrapBack: items(first: $first) @include(if: $firstYes) {
                total
                ...MediaViewerListMeta
            }
        }
    }
    ${eD}
`,eH=e=>{switch(e){case s.GALLERY:return ej;case s.LIST:return eB;case s.NAME:return eO;case s.TITLE:return ek;default:throw Error("Unknown MediaViewerType: "+e)}},eV={title:"title",name:"name",gallery:"imageGallery",list:"list"},eG={title:"tt",name:"nm",gallery:"rg",list:"ls"},eU={right:"nxt",left:"prev"},eW={id:"mediaViewer_galleryCount_label",defaultMessage:"{position} of {total}"},eF={id:"mediaSheet_ariaLabel_previousImage",defaultMessage:"Previous"},eY={id:"mediaSheet_ariaLabel_nextImage",defaultMessage:"Next"},eq={id:"common_ariaLabel_closePrompt",defaultMessage:"Close Prompt"},eQ={PARENT:"media-viewer",ACTION_BAR:"media-viewer__action-bar",ACTION_BAR_GALLERY_COUNT:"action-bar__gallery-count",MEDIA_SHEET:"media-viewer__media-sheet",PAGE_RIGHT:"media-viewer__page-right",PAGE_LEFT:"media-viewer__page-left",LOADER:"media-viewer__loader",IMAGE:"media-viewer__image",TOUCH_HANDLER:"media-viewer__touch-handler",CONTRIBUTE_EDIT_DRAWER:"contribute-edit-drawer",CONTRIBUTE_EDIT_IFRAME:"contribute-edit-iframe",CONTRIBUTE_REPORT_DRAWER:"contribute-report-drawer",CONTRIBUTE_REPORT_IFRAME:"contribute-report-iframe"},eK={NO_ELEMENT:"advertising banner/interstitial component or iframe are undefined",NO_IFRAME_CONTENT:"banner or interstitial was clicked on, but no contentDocument was found in iframe",NO_CLICK_TARGET:"banner or interstitial was clicked on, but no clickable element was found in iframe"},ez=(0,E.createLogger)()("");function eZ(e,t,i){let a=t?.querySelector("iframe");if(!a){ez.error(eK.NO_ELEMENT);return}let r=a.contentDocument;if(!r||!r.elementFromPoint){ez.error(eK.NO_IFRAME_CONTENT);return}let{left:o,top:n}=a.getBoundingClientRect(),s=r.elementFromPoint(e.clientX-o,e.clientY-n);if(s){s.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,z.P)(i);return}let l=t?.querySelector("#interstitial_sponsored");if(l){let{left:t,top:a,width:r,height:o}=l.getBoundingClientRect(),n=e.clientX-t,s=e.clientY-a;if(n>0&&n<=r&&s>0&&s<=o){l.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,z.P)(i);return}}ez.error(eK.NO_CLICK_TARGET)}let eX=()=>`
    top: calc(47% - 4vh);
    transform: translateY(-47%);
`,eJ=`
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
`,e0=R.default.div.withConfig({componentId:"sc-c7067688-0"})(["overflow:hidden;position:relative;:focus{outline:0;}.",",.","{display:none;}","{height:calc(100vh - 5rem);.",",.","{display:block;}}height:calc(100vh - 7rem);"],eQ.CONTRIBUTE_EDIT_DRAWER,eQ.CONTRIBUTE_REPORT_DRAWER,C.mediaQueries.breakpoints.above.m,eQ.CONTRIBUTE_EDIT_DRAWER,eQ.CONTRIBUTE_REPORT_DRAWER),e1=(0,R.default)(y.Pager).withConfig({componentId:"sc-c7067688-1"})(["","{left:0.25rem;}","{","}",""],C.mediaQueries.breakpoints.below.xs,C.mediaQueries.breakpoints.above.xs,(0,C.setPropertyToSpacingVar)("left","ipt-pageMargin"),eX),e2=(0,R.default)(y.Pager).withConfig({componentId:"sc-c7067688-2"})(["","{right:0.25rem;}","{","}",""],C.mediaQueries.breakpoints.below.xs,C.mediaQueries.breakpoints.above.xs,(0,C.setPropertyToSpacingVar)("right","ipt-pageMargin"),eX),e5=`
    position: absolute;
    top: 0;
    z-index: 1;
    left: 50%;
    transform: translateX(-50%);
`,e7=R.default.div.withConfig({componentId:"sc-c7067688-3"})([""," height:'50px';width:'365px';"],e5),e6=R.default.div.withConfig({componentId:"sc-c7067688-4"})([""," height:100%;width:100%;","{overflow-x:auto;}"],e5,C.mediaQueries.devices.onTouchScreens),e8=R.default.div.withConfig({componentId:"sc-c7067688-5"})(["","{position:absolute;height:100%;width:120%;}","{display:none;}"],C.mediaQueries.devices.onTouchScreens,C.mediaQueries.devices.onCursorScreens),e4=R.default.div.withConfig({componentId:"sc-c7067688-6"})(["",""],eJ),e3=(0,R.default)(N.F).withConfig({componentId:"sc-c7067688-7"})(["&&{","}"],eJ),e9=R.default.div.withConfig({componentId:"sc-c7067688-8"})(["@keyframes slide-in{0%{left:50%;}100%{left:50%;}}"," height:100%;width:100%;animation:slide-in 1s;left:",";display:flex;align-items:center;justify-content:center;z-index:1;","{z-index:0;}> div{width:100%;height:100%;}#interstitial_responsive_wrapper,#interstitial_wrapper{display:flex;width:100%;height:100%;flex-direction:column;justify-content:center;align-items:center;}#interstitialplaceholderPattern{display:none;}"],eJ,e=>`calc(50% + ${e.offset}px)`,C.mediaQueries.devices.onTouchScreens),te=R.default.span.withConfig({componentId:"sc-c7067688-9"})([""," vertical-align:middle;","{display:none;}","{margin-right:0.325rem;text-align:right;}"],(0,C.setPropertyToColorVar)("color","ipt-on-baseAlt-accent1-color"),C.mediaQueries.breakpoints.only.m,C.mediaQueries.breakpoints.above.m),tt=e=>{let{state:t,className:i,imagePosition:a}=e,r={countLabel:(0,K.N)(eW,{position:a,total:t.totalImages})},o=`${eG[t.type]}_mv`,n=(0,p.useRef)(null);return(0,d.jsx)(eC.ol,{className:q()(eQ.ACTION_BAR,f.MEDIAVIEWER_ACTIONBAR_CLASS,i),refTagPrefix:o,shareProps:{shareBody:ta,emailSubject:ta,label:ti},breadcrumbProps:{refTagPrefix:o,"data-testid":"mv-breadcrumb-close-button"},actions:(0,d.jsxs)(d.Fragment,{children:[!t.showInterstitial&&!!t.position&&t.totalImages&&(0,d.jsx)(te,{"data-testid":eQ.ACTION_BAR_GALLERY_COUNT,children:r.countLabel}),(0,d.jsx)(e$,{galleryUrl:o?`${t.galleryUrl}?ref_=${o}_sm`:t.galleryUrl})]}),heightClass:"extended",children:!t.showInterstitial&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eL.ZP,{name:f.MEDIAVIEWER_BANNER_SLOT_NAME}),(0,d.jsx)(e7,{ref:n,onClick:e=>{eZ(e,n.current,"ad-banner")}})]})})},ti={id:"mediaViewer_ariaLabel_shareOnSocialMedia",defaultMessage:"share on social media"},ta={id:"mediaViewer_shareText_viewThisImage",defaultMessage:"View this image on IMDb!"},tr=1e3/60;function to(){clearTimeout(a),a=void 0}function tn(e){return e>0?Math.min(450,e):e<0?Math.max(-450,e):0}function ts(e,t,i){30>Math.abs(e)?(t(0),to()):(i(),t(tn(-e)),to(),setTimeout(()=>t(0),tr))}var tl=i(5632),td=i(18174),tc=i.n(td),tm=i(72072),tu=i(76460),tg=i(27261),tp=i(98046),tf=i(19126),th=i.n(tf);let tI=e=>{let t=e?th().parse(window.location.search.replace("?","")):{};return delete t.ref_,th().stringify(t)};var tE=i(72579),tT=i.n(tE);let tw=(e,t)=>{switch(e){case s.NAME:return tT()(t,`${e}.${e}Text.text`,"");case s.TITLE:let i=tT()(t,`${e}.${e}Text.text`,""),a=tT()(t,`${e}.releaseYear.year`,"");return a?`${i} (${a})`:i;case s.GALLERY:return tT()(t,"imageGallery.galleryText","");case s.LIST:return tT()(t,`${e}.name.originalText`,"")}},tb=(e,t)=>e===s.NAME||e===s.TITLE?`/${e}/${t}/mediaindex/`:`/${e}/${t}/`,tA=(e,t)=>{let i=[];return t.forEach(t=>{let a=e===s.LIST?{...t,node:{...t.node.item,caption:t.node.description?.originalText||t.node.item.caption}}:{...t};i.push(a)}),i},ty=(e,t,i)=>{let a=eV[e],r=e===s.LIST?"items":"images",o=`${a}.${r}`,n=`${a}.wrapFront`,l=`${a}.wrapBack`,d=a=>({images:tA(e,tT()(i,`${a}.edges`,[])),title:tw(e,i),galleryUrl:tb(e,t),total:tT()(i,`${a}.total`,0),startCursor:tT()(i,`${a}.pageInfo.startCursor`,""),hasPreviousPage:tT()(i,`${a}.pageInfo.hasPreviousPage`,!1),endCursor:tT()(i,`${a}.pageInfo.endCursor`,""),hasNextPage:tT()(i,`${a}.pageInfo.hasNextPage`,!1)}),c=d(o),m=d(n),u=d(l),g=c.total?c:m.total?m:u;return{images:[...c.images,...m.images,...u.images],title:g.title,galleryUrl:g.galleryUrl,total:g.total,startCursor:g.startCursor,hasPreviousPage:g.hasPreviousPage,endCursor:g.endCursor,hasNextPage:c.hasNextPage}},tv=(e,t,i,a,r,o)=>{let n=[],s={main:void 0};switch(e){case"init":s.main={id:t,jumpTo:r,first:20,last:10,lastYes:!0,firstYes:!0};break;case"left":n=[...Array(20).keys()].map(e=>{let t=i-e;return t<=0?null:t}),s.main={id:t,before:a,last:20,lastYes:!0,firstYes:!1};break;case"right":n=[...Array(20).keys()].map(e=>{let t=i+e;return t>o?null:t}),s.main={id:t,after:a,first:20,lastYes:!1,firstYes:!0}}return n=n.filter(e=>null!==e),"init"!==e&&n.length<1&&(s.main=void 0),{fetchPositions:n,args:s}},tx=(e,t)=>{let i,a;let r=e.position||0,o=e.media&&e.media[r],n=o?.node.id;return n&&(i=e.vanitySubType&&e.vanityType?"/[mediaViewerType]/[vanityOrId]/[idWithVanity]/mediaviewer/[img]":"/[mediaViewerType]/[vanityOrId]/mediaviewer/[img]",a=e.vanitySubType&&e.vanityType?`/${e.vanityType}/${e.vanitySubType}/${e.listId}/mediaviewer/${n}/${t&&`?${t}`}`:`/${e.vanityType??e.type}/${e.listId}/mediaviewer/${n}/${t&&`?${t}`}`),{url:i,path:a}},tS=(e,t,i)=>{let a=eG[t],r=eU[e];return`${a}_${i?"mv_ad":"mv"}_${r}`},t_=e=>3===Math.abs(e)||0==((Math.abs(e)-3)%6+6)%6,tM=e=>0==((Math.abs(e)-3)%3+3)%3;(n=l||(l={})).INITIALIZE="INITIALIZE",n.PAGE_LEFT="PAGE-LEFT",n.PAGE_RIGHT="PAGE-RIGHT",n.GOTO_IMAGE_ID="GOTO-IMAGE-ID",n.UPDATE_DISTANCE="UPDATE-DISTANCE",n.UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE="UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",n.FETCH_IMAGES="FETCH-IMAGES",n.FETCH_IMAGES_PENDING="FETCH-IMAGES-PENDING",n.FETCH_IMAGES_DONE="FETCH-IMAGES-DONE",n.FETCH_IMAGES_FAILED="FETCH-IMAGES-FAILED",n.SHOW_EDIT_DRAWER="SHOW-EDIT-DRAWER",n.HIDE_EDIT_DRAWER="HIDE-EDIT-DRAWER",n.SHOW_REPORT_DRAWER="SHOW-REPORT-DRAWER",n.HIDE_REPORT_DRAWER="HIDE-REPORT-DRAWER",n.SHOW_BOTTOM_SHEET="SHOW-BOTTOM-SHEET",n.HIDE_BOTTOM_SHEET="HIDE-BOTTOM-SHEET",n.SHOW_PAGER="SHOW-PAGER",n.HIDE_PAGER="HIDE-PAGER",n.SET_MOUSE_TIMEOUT_ID="SET-MOUSE-TIMEOUT-ID",n.SET_LAST_TIME_MOUSE_MOVED="SET-LAST-TIME-MOUSE-MOVED";let tL=(0,E.createLogger)()("useMediaViewerState"),tN={initialize:e=>(t,i)=>{let{initialImageId:a,type:r,listId:o}=i();e||(t(a?tN.fetchImageBatch({direction:"init",jumpTo:a}):tN.fetchImageBatch({direction:"init",position:0})),t({type:"INITIALIZE",payload:{setState:{position:0,type:r,listId:o,initialImageId:a,enablePagers:!0}}}))},gotoImageId:e=>(t,i)=>{let a=Object.values(i().media).find(t=>t.node.id===e);t(a?{type:"GOTO-IMAGE-ID",payload:{position:a.position}}:tN.fetchImageBatch({direction:"init",jumpTo:e}))},fetchImageBatch:e=>(t,i)=>{let{jumpTo:a,direction:r,position:o}=e,n=i(),{type:l,listId:d,media:c,isUserLoggedIn:m}=n,{fetchPositions:u,args:p}=tv(r,d,o,c[n.position]?.cursor,a,n.totalImages),f=l===s.LIST,{publicRuntimeConfig:h}=g()();t({type:"FETCH-IMAGES-PENDING",payload:{fetchPositions:u,setState:{initiallyLoading:0===u.length&&!o}}}),Promise.all([!!p.main&&n.gqlClient.query(eH(l),p.main,{url:h.graphQLEndpoint,serverSideCacheable:!(f&&m)}).toPromise().then(e=>{let a=ty(l,d,e.data);if(a.images.length<1){let e="mediaviewer queryData image was empty";throw tL.error(e,{type:i().type,id:i().listId}),Error(e)}t({type:"FETCH-IMAGES-DONE",payload:{direction:r,fetchPositions:u,fetchResult:a}})}).catch(e=>{tL.error("mediaviewer query resulted in error",{type:i().type,id:i().listId,error:e}),t({type:"FETCH-IMAGES-FAILED",payload:{fetchPositions:u,setState:{initiallyLoading:!1},fetchError:e}})})].filter(Boolean))},page:e=>(t,i)=>{let a,r,o;let n=i(),s={left:-1,right:1,load_left:-4,load_right:4},l=n.pageDirection;if(n.loading[n.position]&&!n.showInterstitial||!n.enablePagers)return;let d=n.showInterstitial;t_(i().distance)&&(i().unseenInterstitialAvailable=!1),tM(i().distance)&&n.adHandlers?.updateBannerAd(),t(tN.updateDistance(s[e])),t(tN.stageInterstitialAd());let c=i().showInterstitial,m=d&&l!==e,u=c||m?i().position:i().position+s[e],g=i().position+s[`load_${e}`],p={type:n.type,subType:h.SubPageType.MEDIA_SINGLE,id:n.listId};switch(e){case"left":r=u<=0?i().totalImages:u,a=g<=0?1:r===i().totalImages?i().totalImages:g,o="PAGE-LEFT";break;case"right":r=u>n.totalImages?1:u,a=g>n.totalImages?i().totalImages:1===r?1:g,o="PAGE-RIGHT"}n.media[r]||(a=r),n.media[a]||n.errors[a]||n.loading[a]||t(tN.fetchImageBatch({direction:e,position:r}));let f=tS(e,n.type,d);i().showInterstitial?(0,tg.K8)(f,p,`mvi-${o}`,tp.qB.ACTION_ONLY):(0,tg.K8)(f,p,`mv-${o}`,tp.qB.PAGE_HIT),t({type:o,payload:{position:r,refTag:f}})},updateDistance:e=>(t,i)=>{t({type:"UPDATE-DISTANCE",payload:{distance:i().distance+e}})},stageInterstitialAd:()=>async(e,t)=>{if(!t().unseenInterstitialAvailable){let i=await t().adHandlers?.updateInterstitialAd(),a=!(0,tu.Wd)(i?.slotsMap?.[f.INTERSTITIAL_SLOT_NAME]);e({type:"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",payload:{unseenInterstitialAvailable:a}}),t_(t().distance)&&(t().showInterstitial=a)}},showEdit:()=>({type:"SHOW-EDIT-DRAWER"}),hideEdit:()=>({type:"HIDE-EDIT-DRAWER"}),showReport:()=>({type:"SHOW-REPORT-DRAWER"}),hideReport:()=>({type:"HIDE-REPORT-DRAWER"}),showBottomSheet:()=>({type:"SHOW-BOTTOM-SHEET"}),hideBottomSheet:()=>({type:"HIDE-BOTTOM-SHEET"}),showPager:()=>({type:"SHOW-PAGER"}),hidePager:()=>({type:"HIDE-PAGER"}),setMouseTimeoutId:e=>t=>{t({type:"SET-MOUSE-TIMEOUT-ID",payload:{mouseTimeoutId:e}})},setLastTimeMouseMoved:e=>t=>{t({type:"SET-LAST-TIME-MOUSE-MOVED",payload:{lastTimeMouseMoved:e}})}},tR=function(e,t){let i,{type:a,payload:r}=t;switch(a){case"INITIALIZE":i={...e,...r?.setState};break;case"FETCH-IMAGES-PENDING":{let{fetchPositions:t}=r,a={...e.loading},o={...e.media};t.forEach(e=>{o[e]||(a[e]=!0)}),i={...e,loading:a,...r?.setState};break}case"FETCH-IMAGES-DONE":{let{fetchResult:t,fetchPositions:a,direction:o}=r,n={...e.media},s={...e.loading};t.images.forEach(e=>{if(n[e.position]||(n[e.position]=e,s[e.position]=!1),(0,A.getIsBrowser)()){let t=new Image;t.srcset=(0,L.gA)(e.node,!0),t.src=e.node.url}}),a?.forEach(e=>{s[e]=!1});let l="init"===o?t.images?.[0]?.position:t$(e.position,s,n,o,t);i={...e,initiallyLoading:!1,position:l,media:n,loading:s,listTitle:t.title,totalImages:t.total,enablePagers:t.total>1,galleryUrl:t.galleryUrl};break}case"FETCH-IMAGES-FAILED":{let{fetchPositions:t,fetchError:a}=r,o={...e.loading},n={...e.errors},s={...e.media};t.forEach(e=>{o[e]=!1,s[e]||(n[e]=a)}),i={...e,...r?.setState,errors:n,loading:o};break}case"PAGE-LEFT":case"PAGE-RIGHT":case"GOTO-IMAGE-ID":i={...e,position:r.position,refTag:r.refTag};break;case"UPDATE-DISTANCE":{let t=r?.distance??0,a=e.distance>t?"left":"right",o=t_(t)&&e.unseenInterstitialAvailable,n=t_(t-1),s=t_(t+1);i={...e,distance:r.distance,showInterstitial:o,prevIsInterstitial:n,nextIsInterstitial:s,pageDirection:a};break}case"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE":{let{unseenInterstitialAvailable:t}=r;i={...e,unseenInterstitialAvailable:t};break}case"SHOW-EDIT-DRAWER":i={...e,showEditDrawer:!0,showReportDrawer:!1};break;case"HIDE-EDIT-DRAWER":i={...e,showEditDrawer:!1};break;case"SHOW-REPORT-DRAWER":i={...e,showReportDrawer:!0,showEditDrawer:!1};break;case"HIDE-REPORT-DRAWER":i={...e,showReportDrawer:!1};break;case"SHOW-BOTTOM-SHEET":i={...e,showBottomSheet:!0};break;case"HIDE-BOTTOM-SHEET":i={...e,showBottomSheet:!1};break;case"SHOW-PAGER":i={...e,pagerVisibility:!0};break;case"HIDE-PAGER":i={...e,pagerVisibility:!1};break;case"SET-MOUSE-TIMEOUT-ID":i={...e,mouseTimeoutId:r.mouseTimeoutId};break;case"SET-LAST-TIME-MOUSE-MOVED":i={...e,lastTimeMouseMoved:r.lastTimeMouseMoved};break;default:throw Error("No reducer defined for type: "+a)}return tL.debug("reduced",a,"to new state",i,"payload",r),i},tC=(e,t,i,a,r,o,n,s,l)=>{let d=(0,J.m8)(),c=(0,tl.useRouter)(),m={type:e,listId:t,initialImageId:i,vanitySubType:r,vanityType:a,refTag:o,gqlClient:d,media:{},errors:{},loading:{},distance:0,showEditDrawer:!1,showReportDrawer:!1,showBottomSheet:!0,pagerVisibility:!0,mouseTimeoutId:0,lastTimeMouseMoved:new Date,enablePagers:!0,pageDirection:"init",adHandlers:n,isUserLoggedIn:s,adBannerCleared:!1,unseenInterstitialAvailable:!1,showInterstitial:!1,prevIsInterstitial:!1,nextIsInterstitial:!1,initiallyLoading:!1};l&&(m=tR(m,{type:"FETCH-IMAGES-DONE",payload:{direction:m.pageDirection,fetchResult:l,fetchPositions:l.images?.map(e=>e.position)}}));let u=tc()(tR,m),g=u[0],f=u[1],h={pageLeft:()=>f(tN.page("left")),pageRight:()=>f(tN.page("right")),showEdit:()=>f(tN.showEdit()),hideEdit:()=>f(tN.hideEdit()),showReport:()=>f(tN.showReport()),hideReport:()=>f(tN.hideReport()),showBottomSheet:()=>f(tN.showBottomSheet()),hideBottomSheet:()=>f(tN.hideBottomSheet()),gotoImageId:e=>f(tN.gotoImageId(e)),showPager:()=>f(tN.showPager()),hidePager:()=>f(tN.hidePager()),setMouseTimeoutId:e=>f(tN.setMouseTimeoutId(e)),setLastTimeMouseMoved:e=>f(tN.setLastTimeMouseMoved(e))},I=e=>{tm.M6.isRightArrowKey(e)?h.pageRight():tm.M6.isLeftArrowKey(e)&&h.pageLeft()};(0,p.useEffect)(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}),[]);let E=(0,p.useRef)(void 0),T=(0,p.useRef)(!1);return(0,p.useEffect)(()=>{let{url:e,path:t}=tx(g,tI((0,A.getIsBrowser)())),i=g.position||0,a=g.media&&g.media[i],r=a?.node.id,o=E.current;if(o&&i!==o&&a&&e){if(E.current=g.position,!r)return;if(!T.current){T.current=!0;return}c.replace(e,t,{shallow:!0,imageId:r})}else 0>window.location.href.indexOf(r)&&e&&c.replace(e,t,{shallow:!0,imageId:r})},[g.position,g.media]),(0,p.useEffect)(()=>{f(tN.initialize(l))},[]),(0,p.useDebugValue)(g),{state:g,actions:h}},t$=(e,t,i,a,r)=>{let o=e,n="left"===a;if(void 0!==o&&!t[o]&&!i[o]){if(r.images.length){let e=n?r.images.length-1:0;o=r.images[e].position}else{let e=Object.keys(i).sort();e.length&&(n&&e.reverse(),o=e.reduce((e,t)=>{let i=e,a=Number(t);return void 0===i?i=a:n&&a<o&&i>o?i=a:a>o&&i<o&&(i=a),i},void 0))}}return o},tP=e=>{let{type:t,listId:i,imgId:o,vanityType:n,vanitySubType:s,refTag:l,adHandlers:c,initialQueryData:m,initialQueryError:u}=e,g=(0,eR.n)(),h=(0,eN.Z)(),{state:I,actions:E}=tC(t,i,o,n,s,l,c,g,m?ty(t,i,m):void 0),{showInterstitial:T,errors:w,position:x,loading:S,media:_,totalImages:M,initiallyLoading:L}=I,[N,R]=(0,p.useState)(0),C=(0,p.useRef)(null),$=w[x],P=_[x]?.node,D=_[x-1]?.node,O=_[x+1]?.node,k=_[x]?.position,j=S[x]||L,B=_[x]?.node.correctionLink?.url,H=_[x]?.node.reportingLink?.url,V={countLabel:(0,K.N)(eW,{position:k,total:M}),previousImageLabel:(0,K.N)(eF),nextImageLabel:(0,K.N)(eY),closePromptLabel:(0,K.N)(eq)},G=(0,y.useSwipeable)({onSwipedLeft:e=>{ts(-e.deltaX,e=>R(e),E.pageRight)},onSwipedRight:e=>{ts(-e.deltaX,e=>R(e),E.pageLeft)},onSwiping:e=>{var t,i;t=-e.deltaX,i=e=>R(e),a?r=()=>{i(tn(t))}:(i(tn(t)),a=setTimeout(()=>{r&&r(),to()},tr))},onSwiped:()=>{var e;e=e=>R(e),to(),setTimeout(()=>e(0),tr)}});function Y(e){let t=document.getElementsByClassName(e);return!!(t.length>0&&t[0].matches(":hover"))}function q(){return!(0,A.getIsNode)()&&(0,b.getIsMdot)(window.location.hostname)}function Q(){if(j||q())return;let e=Y(eQ.PAGE_LEFT),t=Y(eQ.PAGE_RIGHT);e||t||E.hidePager()}if((0,p.useEffect)(()=>{q()&&E.showPager()},[]),(0,p.useEffect)(()=>{E.setMouseTimeoutId(setTimeout(Q,5e3))},[]),(0,p.useEffect)(()=>{T&&clearTimeout(I.mouseTimeoutId)},[T]),$||u)return(0,d.jsx)(e3,{});let z={image:P||void 0,title:I.listTitle,description:P?.caption?.plainText||I.listTitle,openGraphData:{type:F.s.Website}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(W.Se,{...z}),(0,d.jsx)(eM.Z,{}),(0,d.jsx)(y.PageContentContainer,{children:(0,d.jsx)(tt,{state:I,imagePosition:k})}),(0,d.jsxs)(e0,{"data-testid":eQ.PARENT,className:eQ.PARENT,children:[(0,d.jsx)(e6,{...G,onMouseMove:()=>{I.pagerVisibility||E.showPager(),+new Date().getTime()-I.lastTimeMouseMoved.getTime()>400&&(clearTimeout(I.mouseTimeoutId),E.setLastTimeMouseMoved(new Date),E.setMouseTimeoutId(setTimeout(Q,2e3)))},"data-testid":eQ.TOUCH_HANDLER,onClick:e=>{T?eZ(e,C.current,"ad-interstitial"):I.showBottomSheet?E.hideBottomSheet():E.showBottomSheet()},children:(0,d.jsx)(e8,{})}),I.enablePagers&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e1,{isVisible:!j&&I.pagerVisibility,direction:"left",onSelect:E.pageLeft,className:eQ.PAGE_LEFT,ariaLabel:V.previousImageLabel}),(0,d.jsx)(e2,{isVisible:!j&&I.pagerVisibility,direction:"right",onSelect:E.pageRight,className:eQ.PAGE_RIGHT,ariaLabel:V.nextImageLabel})]}),j&&!T&&(0,d.jsx)(e4,{"data-testid":eQ.LOADER,children:(0,d.jsx)(y.Loader,{})}),T&&(0,d.jsx)(e9,{offset:N,ref:C,isMdot:q(),children:(0,d.jsx)(eL.ZP,{name:f.INTERSTITIAL_SLOT_NAME})}),!I.showInterstitial&&!$&&!u&&!j&&P&&(0,d.jsx)(U,{image:P,"data-testid":eQ.IMAGE,offset:N,prevImage:I.prevIsInterstitial?void 0:D,nextImage:I.nextIsInterstitial?void 0:O},"image-"+P.id),!I.showInterstitial&&!$&&!j&&P&&(0,d.jsx)(e_,{className:eQ.MEDIA_SHEET,imageData:P,content:{contextTitle:`${I.listTitle}`,contextCount:V.countLabel},editFlow:B&&h?{desktopLink:B,desktopOnOpen:()=>E.showEdit(),resolveMobileURL:e=>e.correctionLink.url}:void 0,reportFlow:H&&h?{desktopLink:H,desktopOnOpen:()=>E.showReport(),resolveMobileURL:e=>e.reportingLink.url}:void 0,listId:i,isClosed:!I.showBottomSheet,onCloseClicked:E.hideBottomSheet,onOpenClicked:E.showBottomSheet,refTagPrefix:`${eG[I.type]}_mv`}),(0,d.jsx)(y.Drawer,{"data-testid":"mv-contribute-edit-drawer",className:eQ.CONTRIBUTE_EDIT_DRAWER,isOpen:I.showEditDrawer,onCloseClicked:E.hideEdit,closePromptLabel:V.closePromptLabel,children:P&&(0,d.jsx)(v.o,{src:B,onCloseMeCallback:E.hideEdit,className:eQ.CONTRIBUTE_EDIT_IFRAME})}),(0,d.jsx)(y.Drawer,{className:eQ.CONTRIBUTE_REPORT_DRAWER,isOpen:I.showReportDrawer,onCloseClicked:E.hideReport,children:P&&(0,d.jsx)(v.o,{src:H,onCloseMeCallback:E.hideReport,className:eQ.CONTRIBUTE_REPORT_IFRAME})})]})]})};var tD=i(42644),tO=i(42951),tk=i(37519),tj=!0,tB=e=>{let{type:t,id:i,vanityType:a,vanitySubType:r,refTag:o,validImageId:n,initialQueryData:s,initialQueryError:l}=e,u=(0,tD.D)();return u.clientSideUrl=(0,f.updateClientSideUrl)(g()().publicRuntimeConfig.adsPublicSiteHost,(0,m.isDevNodeEnv)(),u.clientSideUrl),(0,d.jsx)(I.ZP,{children:(0,d.jsxs)(tk.Z,{hideNav:!0,hideFooter:!0,hideNavigationProgressBar:!0,baseColor:"baseAlt",orientContent:"full",cti:h.CTIS.GALLERIES_CTI,children:[(0,d.jsx)(tP,{type:t,listId:i,imgId:n,vanityType:a,vanitySubType:r,refTag:o,adHandlers:{updateBannerAd:async()=>{let e=JSON.parse(JSON.stringify(u));delete e.slotSizeMap[f.INTERSTITIAL_SLOT_NAME],await w(e)},updateInterstitialAd:async()=>{if(u.isAbpEnabled)return;let e=JSON.parse(JSON.stringify(u));return delete e.slotSizeMap[f.MEDIAVIEWER_BANNER_SLOT_NAME],w(e)}},initialQueryData:s,initialQueryError:l}),(0,tO.YN)(),(0,d.jsx)(c.CSAPageATFScript,{})]})})}}}]);